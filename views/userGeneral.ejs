<% include head %>
<% include usersNavbar %>

<body style="background-color: #D9D9D9">
    <div class="userGeneral">
        <div class='col-12 col-lg-4 profileCard'>
                <div class="card-profile-stats">
                    <div class="card-profile-stats-intro">
                        <img class="card-profile-stats-intro-pic" src="<%= userData.picture %>" alt="profile-image" />
                        <div class="card-profile-stats-intro-content">
                            <h3><%=userData.first_name %> <%=userData.last_name %></h3>
                            <% if(myPage){ %>
                                <div>
                                <button type='submit' class="editButton btn btn-primary" ><a href="/users/editProfile">Edit Profile</a></button>
                                </div>
                           <% } %>
                            <p>Traveling since <%= userTrips.slice(-1)[0].start_date %></small></p>
                        </div> <!-- /.card-profile-stats-intro-content -->
                    </div> <!-- /.card-profile-stats-intro -->
                    <hr />
                    <div class="card-profile-stats-container">
                        <div class="card-profile-stats-statistic">
                            <span class="stat"><%= userTripsCreated.count %></span>
                            <p>Trips Created</p>
                        </div> <!-- /.card-profile-stats-statistic -->
                        <div class="card-profile-stats-statistic">
                            <span class="stat"><%= userTripsAttended.count %></span>
                            <p>Trips Attended</p>
                        </div> <!-- /.card-profile-stats-statistic -->
                    </div> <!-- /.card-profile-stats-container -->
                </div> <!-- /.card-profile-stats -->
            </div>
        
        
    <div class='col-12 col-lg-7 profileTimeline'>
        <div class="timeline" style="color: #2B2D42">
        <% userTrips.forEach((trip, i) => { %>
            <% if(i % 2 === 0) { %>
                <div class="timeline-item">
                        <div class="timeline-icon">
                        <a href="/users/trips/<%=trip.id%>">
                            <img src="<%=trip.picture%>" style='border-radius: 50%' width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm3 8h-1.35c-.538 0-.65.221-.65.778v1.222h2l-.209 2h-1.791v7h-3v-7h-2v-2h2v-2.308c0-1.769.931-2.692 3.029-2.692h1.971v3z"/></img>
                        </a>
                        </div>
                    <div class="timeline-content">
                        <h2 class="timeline-content-date"><%= trip.name %></h2>
                        <p><%= trip.description %></p>
                    </div>
                </div>
            <% }else{ %>
                <div class="timeline-item">
                    <div class="timeline-icon">
                        <a href="/users/trips/<%=trip.id%>">
                            <img src="<%=trip.picture%>" style='border-radius: 50%' width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm3 8h-1.35c-.538 0-.65.221-.65.778v1.222h2l-.209 2h-1.791v7h-3v-7h-2v-2h2v-2.308c0-1.769.931-2.692 3.029-2.692h1.971v3z"/></img>
                        </a>
                    </div>
                    <div class="timeline-content right">
                        <h2 class="timeline-content-date"><%= trip.name %></h2>
                        <p><%= trip.description %></p>
                    </div>
                </div>
            <% } %>
        <% }) %>
        </div>        
    </div>
</div>
<% include footer %>    
</body>